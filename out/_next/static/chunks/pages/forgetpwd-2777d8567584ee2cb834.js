(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{6379:function(e,s,r){"use strict";r.d(s,{l:function(){return o}});r(7294);var n=r(5893),o=function(e){var s=e.errorTips,r=e.showTipsState,o=(0,n.jsx)("label",{className:"label",children:(0,n.jsx)("span",{className:"label-text-alt text-sm text-red-600",children:s})});return(0,n.jsx)(n.Fragment,{children:r?o:null})};o.defaultProps={errorTips:"",showTipsState:!1}},5296:function(e,s,r){"use strict";r.d(s,{G:function(){return l}});var n=r(7294),o=r(6379),a=r(3890),t=r(5893),l=function(e){var s=e.keyName,r=e.formik,l=(0,n.useState)(0),i=l[0],c=l[1],d=(0,n.useState)(0),u=d[0],p=d[1],h=(0,n.useRef)({phone:""}),m=(0,n.useState)(""),f=m[0],x=m[1],j=(0,n.useState)("error"),v=j[0],w=j[1],b=(0,n.useState)(0),N=b[0],g=b[1];(0,n.useEffect)((function(){var e=null;if(i>0)return console.log("\u5f00\u59cb\u5012\u8ba1\u65f6"),e=setInterval((function(){c(i-1)}),1e3),function(){clearInterval(e)}}),[i]);return(0,t.jsxs)("div",{children:[(0,t.jsx)(a.F2,{tipsText:f,tipsType:v,tipsTime:4e3,openTipsCount:N}),(0,t.jsxs)("div",{className:"form-control",children:[(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"\u624b\u673a\u9a8c\u8bc1\u7801"})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{name:s,placeholder:"ValidateCode",className:"w-full pr-16 input input-primary input-bordered",value:r.values[s],onChange:r.handleChange}),i>0?(0,t.jsx)("span",{className:"countdown absolute top-4 right-3 rounded-l-none",children:(0,t.jsx)("span",{style:{"--value":i}})}):(0,t.jsx)("button",{type:"button",className:"absolute top-0 right-0 rounded-l-none btn btn-link",onClick:function(){r.validateField("phone"),void 0===r.errors.phone&&!0===r.touched.phone&&(h.current={phone:r.values.phone},c(99),p(u+1))},children:"\u53d1\u9001\u9a8c\u8bc1\u7801"}),(0,t.jsx)(o.l,{errorTips:r.errors[s],showTipsState:r.touched[s]&&r.errors[s]})]})]}),(0,t.jsx)(a.LO,{api:a.MB.phoneSmsCode,method:"POST",data:h.current,resolveBk:function(e){console.log("responseHandle",e),x("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001"),w("success"),g(N+1)},rejectBk:function(e){console.log("responseErrorHandle",e),x("\u9a8c\u8bc1\u7801\u53d1\u9001\u5931\u8d25"),w("error"),g(N+1),p(0)},requestCount:u})]})};l.defaultProps={keyName:"validCode",formik:{}}},2784:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return h}});var n=r(7294),o=r(1664),a=r(4649),t=r(9501),l=r(5296),i=r(6379),c=r(3890),d=r(5893),u=t.Ry().shape({phone:t.Z_().min(10,"\u8bf7\u68c0\u67e5\u624b\u673a\u53f7\u7801...").max(12,"\u8bf7\u68c0\u67e5\u624b\u673a\u53f7\u7801...").required("\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a...").matches(/^1[3456789]\d{9}$/,"\u624b\u673a\u53f7\u7801\u9519\u8bef..."),password:t.Z_().min(6,"\u5bc6\u7801\u5fc5\u987b6\uff5e24\u4f4d...").max(24,"\u5bc6\u7801\u5fc5\u987b6\uff5e24\u4f4d...").required("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a..."),confirmPassword:t.Z_().oneOf([t.iH("password"),null],"\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4...").required("\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a..."),validCode:t.Z_().required("\u8bf7\u8f93\u5165\u624b\u673a\u9a8c\u8bc1\u7801...")}),p=function(){var e=(0,n.useRef)({phone:"",sms_code:"",password:""}),s=(0,n.useState)(0),r=s[0],t=s[1],p=(0,n.useState)(0),h=p[0],m=p[1],f=(0,n.useRef)({}),x=(0,n.useState)(""),j=x[0],v=x[1],w=(0,n.useState)("error"),b=w[0],N=w[1],g=(0,n.useState)(0),T=g[0],C=g[1],S=function(){var s=P.values,n={},o=c.a5.forgetPwd;for(var a in o){n[o[a]]=s[a]}e.current=n,t(r+1)},P=(0,a.TA)({initialValues:{phone:"",password:"",confirmPassword:"",validCode:""},validationSchema:u,onSubmit:function(e){console.log(e),function(e){f.current={mobile:e.phone},m(h+1)}(e)}});return(0,d.jsxs)("div",{className:"hero min-h-screen bg-base-200",children:[(0,d.jsx)(c.F2,{tipsText:j,tipsType:b,openTipsCount:T}),(0,d.jsxs)("div",{className:"flex-col justify-center hero-content lg:flex-row",children:[(0,d.jsx)("div",{className:"text-center lg:text-left",children:(0,d.jsx)("h1",{className:"mb-5 lg:mr-6 text-2xl font-bold",children:"\u627e\u56de\u5bc6\u7801ForgetPassword"})}),(0,d.jsx)("div",{className:"card flex-shrink-0 w-full max-w-sm shadow-2xl bg-base-100",children:(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsxs)("form",{onSubmit:P.handleSubmit,children:[(0,d.jsxs)("div",{className:"form-control",children:[(0,d.jsx)("label",{className:"label",children:(0,d.jsx)("span",{className:"label-text",children:"\u624b\u673a\u53f7\u7801"})}),(0,d.jsx)("input",{name:"phone",placeholder:"Mobile Phone",className:"input input-primary input-bordered",value:P.values.phone,onChange:P.handleChange,onBlur:P.handleBlur}),(0,d.jsx)(i.l,{errorTips:P.errors.phone,showTipsState:P.touched.phone&&P.errors.phone})]}),(0,d.jsxs)("div",{className:"form-control",children:[(0,d.jsx)("label",{className:"label",children:(0,d.jsx)("span",{className:"label-text",children:"\u65b0\u5bc6\u7801"})}),(0,d.jsx)("input",{name:"password",type:"password",placeholder:"Password",className:"input input-primary input-bordered",value:P.values.password,onChange:P.handleChange}),(0,d.jsx)(i.l,{errorTips:P.errors.password,showTipsState:P.touched.password&&P.errors.password})]}),(0,d.jsxs)("div",{className:"form-control",children:[(0,d.jsx)("label",{className:"label",children:(0,d.jsx)("span",{className:"label-text",children:"\u786e\u8ba4\u5bc6\u7801"})}),(0,d.jsx)("input",{name:"confirmPassword",type:"password",placeholder:"ConfirmPassword",className:"input input-primary input-bordered",value:P.values.confirmPassword,onChange:P.handleChange}),(0,d.jsx)(i.l,{errorTips:P.errors.confirmPassword,showTipsState:P.touched.confirmPassword&&P.errors.confirmPassword})]}),(0,d.jsx)(l.G,{keyName:"validCode",formik:P}),(0,d.jsx)("div",{className:"form-control mt-6",children:(0,d.jsx)("button",{type:"submit",className:"btn btn-wide btn-primary",children:"\u4fee\u6539\u5bc6\u7801"})})]}),(0,d.jsx)(o.default,{href:"/signin",children:(0,d.jsx)("p",{className:"link mt-4",children:"\u53bb\u767b\u5f55!"})})]})})]}),(0,d.jsx)(c.LO,{api:c.MB.customerForgetPwd,method:"PUT",data:e.current,resolveBk:function(e){console.log("responseHandleForgetPwd",e),1e3===e.code?(v("\u4fee\u6539\u5bc6\u7801\u6210\u529f!"),N("success"),C(T+1),setTimeout((function(){window.location.href="/signin"}),2e3)):(v("\u4fee\u6539\u5bc6\u7801\u5931\u8d25,\u8bf7\u68c0\u67e5..."),N("error"),C(T+1))},requestCount:r}),(0,d.jsx)(c.LO,{api:c.MB.phoneExists,method:"GET",params:f.current,resolveBk:function(e){console.log("responsePhoneExistsHandle",e),1e3===e.code&&!1===e.user_exists?(v("\u624b\u673a\u53f7\u7801\u4e0d\u5b58\u5728,\u8bf7\u68c0\u67e5..."),N("error"),C(T+1)):S()},requestCount:h})]})};function h(){return(0,d.jsx)(p,{className:"flex flex-col justify-center items-center",children:"SignIn page"})}},7891:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forgetpwd",function(){return r(2784)}])}},function(e){e.O(0,[755,893,890,774,888,179],(function(){return s=7891,e(e.s=s);var s}));var s=e.O();_N_E=s}]);